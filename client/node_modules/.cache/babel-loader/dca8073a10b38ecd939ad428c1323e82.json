{"ast":null,"code":"import _toConsumableArray from\"D:\\\\projects\\\\mern2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\projects\\\\mern2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useDispatch}from\"react-redux\";import{Container,Grow,Grid,Paper,AppBar,TextField,Button}from\"@material-ui/core\";import{useHistory,useLocation}from\"react-router-dom\";import ChipInput from\"material-ui-chip-input\";import{getPosts,getPostsBySearch}from\"../../actions/posts\";import Posts from\"../Posts/Posts\";import Form from\"../Form/Form\";import Pagination from\"../Pagination\";import useStyles from\"./styles\";function useQuery(){return new URLSearchParams(useLocation().search);}function Home(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var query=useQuery();var history=useHistory();var page=query.get(\"page\")||1;var searchQuery=query.get(\"searchQuery\");var classes=useStyles();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];// useEffect(() => {\n//   dispatch(getPosts());\n// }, [currentId, dispatch]);\nvar searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"& tags=\").concat(tags.join(','),\" \"));}else{history.pushState('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};var handleAdd=function handleAdd(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDelete=function handleDelete(tagToDelete){return setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};return/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{maxWidth:\"xl\"},/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:9},/*#__PURE__*/React.createElement(Posts,{setCurrentId:setCurrentId})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:3},/*#__PURE__*/React.createElement(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(TextField,{name:\"search\",variant:\"outlined\",label:\"Search Memories\",onKeyPress:handleKeyPress,fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(ChipInput,{style:{margin:\"10px 0\"},value:tags,onAdd:handleAdd,onDelete:handleDelete,label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{onClick:searchPost,className:classes.searchButton,color:\"primary\",variant:\"contained\"},\"Search\")),/*#__PURE__*/React.createElement(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/React.createElement(Paper,{className:classes.pagination,elevation:6},/*#__PURE__*/React.createElement(Pagination,{page:page}))))));}export default Home;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","Container","Grow","Grid","Paper","AppBar","TextField","Button","useHistory","useLocation","ChipInput","getPosts","getPostsBySearch","Posts","Form","Pagination","useStyles","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","classes","setSearch","tags","setTags","searchPost","trim","join","push","pushState","handleKeyPress","e","keyCode","handleAdd","tag","handleDelete","tagToDelete","filter","gridContainer","appBarSearch","target","value","margin","searchButton","length","pagination"],"sources":["D:/projects/mern2/client/src/components/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  Container,\r\n  Grow,\r\n  Grid,\r\n  Paper,\r\n  AppBar,\r\n  TextField,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport ChipInput from \"material-ui-chip-input\";\r\n\r\nimport { getPosts, getPostsBySearch } from \"../../actions/posts\";\r\nimport Posts from \"../Posts/Posts\";\r\nimport Form from \"../Form/Form\";\r\nimport Pagination from \"../Pagination\";\r\n\r\nimport useStyles from \"./styles\";\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction Home() {\r\n  const [currentId, setCurrentId] = useState(0);\r\n  const dispatch = useDispatch();\r\n  const query = useQuery();\r\n  const history = useHistory();\r\n  const page = query.get(\"page\") || 1;\r\n  const searchQuery = query.get(\"searchQuery\");\r\n  const classes = useStyles();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [tags, setTags] = useState([]);\r\n\r\n  // useEffect(() => {\r\n  //   dispatch(getPosts());\r\n  // }, [currentId, dispatch]);\r\n\r\n  const searchPost =() => {\r\n    if( search.trim() || tags ){\r\n      dispatch(getPostsBySearch({ search, tags: tags.join(',')}));\r\n      history.push(`/posts/search?searchQuery=${search || 'none'}& tags=${tags.join(',')} `)\r\n    }else{\r\n      history.pushState('/');\r\n    }\r\n  }\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.keyCode === 13) {\r\n      searchPost();\r\n    }\r\n  };\r\n\r\n  const handleAdd = (tag) => setTags([...tags, tag]);\r\n\r\n  const handleDelete = (tagToDelete) =>\r\n    setTags(tags.filter((tag) => tag !== tagToDelete));\r\n\r\n  return (\r\n    <Grow in>\r\n      <Container maxWidth=\"xl\">\r\n        <Grid\r\n          container\r\n          justifyContent=\"space-between\"\r\n          alignItems=\"stretch\"\r\n          spacing={3}\r\n          className={classes.gridContainer}\r\n        >\r\n          <Grid item xs={12} sm={6} md={9}>\r\n            <Posts setCurrentId={setCurrentId} />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6} md={3}>\r\n            <AppBar\r\n              className={classes.appBarSearch}\r\n              position=\"static\"\r\n              color=\"inherit\"\r\n            >\r\n              <TextField\r\n                name=\"search\"\r\n                variant=\"outlined\"\r\n                label=\"Search Memories\"\r\n                onKeyPress={handleKeyPress}\r\n                fullWidth\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n              />\r\n\r\n              <ChipInput\r\n                style={{ margin: \"10px 0\" }}\r\n                value={tags}\r\n                onAdd={handleAdd}\r\n                onDelete={handleDelete}\r\n                label=\"Search Tags\"\r\n                variant=\"outlined\"\r\n              />\r\n              <Button\r\n                onClick={searchPost}\r\n                className={classes.searchButton}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Search\r\n              </Button>\r\n            </AppBar>\r\n\r\n            <Form currentId={currentId} setCurrentId={setCurrentId} />\r\n            {(!searchQuery && !tags.length) && (\r\n            <Paper\r\n              className={classes.pagination}\r\n              elevation={6}\r\n            >\r\n              <Pagination page={page} />\r\n            </Paper>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </Grow>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}