{"ast":null,"code":"import _slicedToArray from\"D:\\\\projects\\\\mern2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{AppBar,Avatar,Button,Toolbar,Typography}from\"@material-ui/core\";import{useDispatch}from\"react-redux\";import decode from\"jwt-decode\";import useStyles from\"./styles\";import memories from\"../../images/memories.png\";import{LOGOUT}from\"../../constants/actionTypes\";function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){dispatch({type:LOGOUT});history.push(\"/\");setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem(\"profile\")));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:classes.brandContainer},/*#__PURE__*/React.createElement(Typography,{className:classes.heading,variant:\"h2\",align:\"center\"},\"Memories\"),/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:memories,alt:\"icon\",height:\"60\"})),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},user?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl},user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Signin\")));}export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useHistory","useLocation","AppBar","Avatar","Button","Toolbar","Typography","useDispatch","decode","useStyles","memories","LOGOUT","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","image","toolbar","profile","purple","result","name","imageUrl","charAt","userName"],"sources":["D:/projects/mern2/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { AppBar, Avatar, Button, Toolbar, Typography } from \"@material-ui/core\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport decode from \"jwt-decode\"\r\n\r\nimport useStyles from \"./styles\";\r\nimport memories from \"../../images/memories.png\";\r\nimport { LOGOUT } from \"../../constants/actionTypes\";\r\n\r\nfunction Navbar() {\r\n  const classes = useStyles();\r\n\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\")));\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const logout = () => {\r\n    dispatch({ type: LOGOUT });\r\n    history.push(\"/\");\r\n    setUser(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = user?.token;\r\n    if( token ){\r\n      const decodedToken = decode(token);\r\n      if(decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n    }\r\n    setUser(JSON.parse(localStorage.getItem(\"profile\")));\r\n  }, [location]);\r\n\r\n  return (\r\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\r\n      <Link to=\"/\" className={classes.brandContainer}>\r\n        <Typography className={classes.heading} variant=\"h2\" align=\"center\">\r\n          Memories\r\n        </Typography>\r\n        <img className={classes.image} src={memories} alt=\"icon\" height=\"60\" />\r\n      </Link>\r\n      <Toolbar className={classes.toolbar}>\r\n        {user ? (\r\n          <div className={classes.profile}>\r\n            <Avatar\r\n              className={classes.purple}\r\n              alt={user.result.name}\r\n              src={user.result.imageUrl}\r\n            >\r\n              {user.result.name.charAt(0)}\r\n            </Avatar>\r\n            <Typography className={classes.userName} variant=\"h6\">\r\n              {user.result.name}\r\n            </Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              className={classes.logout}\r\n              color=\"secondary\"\r\n              onClick={logout}\r\n            >\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <Button\r\n            component={Link}\r\n            to=\"/auth\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Signin\r\n          </Button>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}